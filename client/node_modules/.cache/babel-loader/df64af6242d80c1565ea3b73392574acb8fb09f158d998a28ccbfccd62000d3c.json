{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Home/OneDrive/Desktop/Block_Drive/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Home/OneDrive/Desktop/Block_Drive/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Home/OneDrive/Desktop/Block_Drive/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Upload from\"./artifacts/contracts/Upload.sol/Upload.json\";import{useState,useEffect}from\"react\";import{ethers}from\"ethers\";import FileUpload from\"./components/FileUpload\";import Display from\"./components/Display\";import Modal from\"./components/Modal\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),account=_useState2[0],setAccount=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),contract=_useState4[0],setContract=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),provider=_useState6[0],setProvider=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),modalOpen=_useState8[0],setModalOpen=_useState8[1];useEffect(function(){var provider=new ethers.providers.Web3Provider(window.ethereum);var loadProvider=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var signer,address,contractAddress,_contract;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!provider){_context.next=16;break;}window.ethereum.on(\"chainChanged\",function(){window.location.reload();});window.ethereum.on(\"accountsChanged\",function(){window.location.reload();});_context.next=5;return provider.send(\"eth_requestAccounts\",[]);case 5:signer=provider.getSigner();_context.next=8;return signer.getAddress();case 8:address=_context.sent;setAccount(address);contractAddress=\"0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512\";_contract=new ethers.Contract(contractAddress,Upload.abi,signer);//console.log(contract);\nsetContract(_contract);setProvider(provider);_context.next=17;break;case 16:console.error(\"Metamask is not installed\");case 17:case\"end\":return _context.stop();}},_callee);}));return function loadProvider(){return _ref.apply(this,arguments);};}();provider&&loadProvider();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[!modalOpen&&/*#__PURE__*/_jsx(\"button\",{className:\"share\",onClick:function onClick(){return setModalOpen(true);},children:\"Share\"}),modalOpen&&/*#__PURE__*/_jsx(Modal,{setModalOpen:setModalOpen,contract:contract}),/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{i:\"head\",children:\"Block-Drive\"}),/*#__PURE__*/_jsx(\"div\",{class:\"bg\"}),/*#__PURE__*/_jsx(\"div\",{class:\"bg bg2\"}),/*#__PURE__*/_jsx(\"div\",{class:\"bg bg3\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:\"yellow\"},children:[\"Account : \",account?account:\"Not connected\"]}),/*#__PURE__*/_jsx(FileUpload,{account:account,provider:provider,contract:contract}),/*#__PURE__*/_jsx(Display,{contract:contract,account:account})]})]});}export default App;","map":{"version":3,"names":["Upload","useState","useEffect","ethers","FileUpload","Display","Modal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","_useState","_useState2","_slicedToArray","account","setAccount","_useState3","_useState4","contract","setContract","_useState5","_useState6","provider","setProvider","_useState7","_useState8","modalOpen","setModalOpen","providers","Web3Provider","window","ethereum","loadProvider","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","signer","address","contractAddress","_contract","wrap","_callee$","_context","prev","next","on","location","reload","send","getSigner","getAddress","sent","Contract","abi","console","error","stop","apply","arguments","children","className","onClick","i","class","style","color"],"sources":["C:/Users/Home/OneDrive/Desktop/Block_Drive/client/src/App.js"],"sourcesContent":["import Upload from \"./artifacts/contracts/Upload.sol/Upload.json\";\nimport { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\nimport FileUpload from \"./components/FileUpload\";\nimport Display from \"./components/Display\";\nimport Modal from \"./components/Modal\";\nimport \"./App.css\";\n\nfunction App() {\n  const [account, setAccount] = useState(\"\");\n  const [contract, setContract] = useState(null);\n  const [provider, setProvider] = useState(null);\n  const [modalOpen, setModalOpen] = useState(false);\n\n  useEffect(() => {\n    const provider = new ethers.providers.Web3Provider(window.ethereum);\n\n    const loadProvider = async () => {\n      if (provider) {\n        window.ethereum.on(\"chainChanged\", () => {\n          window.location.reload();\n        });\n\n        window.ethereum.on(\"accountsChanged\", () => {\n          window.location.reload();\n        });\n        await provider.send(\"eth_requestAccounts\", []);\n        const signer = provider.getSigner();\n        const address = await signer.getAddress();\n        setAccount(address);\n        let contractAddress = \"0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512\";\n\n        const contract = new ethers.Contract(\n          contractAddress,\n          Upload.abi,\n          signer\n        );\n        //console.log(contract);\n        setContract(contract);\n        setProvider(provider);\n      } else {\n        console.error(\"Metamask is not installed\");\n      }\n    };\n    provider && loadProvider();\n  }, []);\n  return (\n    <>\n      {!modalOpen && (\n        <button className=\"share\" onClick={() => setModalOpen(true)}>\n          Share\n        </button>\n      )}\n      {modalOpen && (\n        <Modal setModalOpen={setModalOpen} contract={contract}></Modal>\n      )}\n\n      <div className=\"App\">\n         <h1 i=\"head\">Block-Drive</h1> \n        \n        <div class=\"bg\"></div>\n        <div class=\"bg bg2\"></div>\n        <div class=\"bg bg3\"></div>\n\n        <p style={{ color: \"yellow\" }}>\n          Account : {account ? account : \"Not connected\"}\n        </p>\n        <FileUpload\n          account={account}\n          provider={provider}\n          contract={contract}\n        ></FileUpload>\n        <Display contract={contract} account={account}></Display>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n\n"],"mappings":"qaAAA,MAAO,CAAAA,MAAM,KAAM,8CAA8C,CACjE,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,MAAM,KAAQ,QAAQ,CAC/B,MAAO,CAAAC,UAAU,KAAM,yBAAyB,CAChD,MAAO,CAAAC,OAAO,KAAM,sBAAsB,CAC1C,MAAO,CAAAC,KAAK,KAAM,oBAAoB,CACtC,MAAO,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEnB,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,IAAAC,SAAA,CAA8Bb,QAAQ,CAAC,EAAE,CAAC,CAAAc,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAnCG,OAAO,CAAAF,UAAA,IAAEG,UAAU,CAAAH,UAAA,IAC1B,IAAAI,UAAA,CAAgClB,QAAQ,CAAC,IAAI,CAAC,CAAAmB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAvCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAC5B,IAAAG,UAAA,CAAgCtB,QAAQ,CAAC,IAAI,CAAC,CAAAuB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAvCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAC5B,IAAAG,UAAA,CAAkC1B,QAAQ,CAAC,KAAK,CAAC,CAAA2B,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAA1CE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAE9B1B,SAAS,CAAC,UAAM,CACd,GAAM,CAAAuB,QAAQ,CAAG,GAAI,CAAAtB,MAAM,CAAC4B,SAAS,CAACC,YAAY,CAACC,MAAM,CAACC,QAAQ,CAAC,CAEnE,GAAM,CAAAC,YAAY,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,MAAA,CAAAC,OAAA,CAAAC,eAAA,CAAAC,SAAA,QAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,aACfxB,QAAQ,EAAAsB,QAAA,CAAAE,IAAA,WACVhB,MAAM,CAACC,QAAQ,CAACgB,EAAE,CAAC,cAAc,CAAE,UAAM,CACvCjB,MAAM,CAACkB,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC1B,CAAC,CAAC,CAEFnB,MAAM,CAACC,QAAQ,CAACgB,EAAE,CAAC,iBAAiB,CAAE,UAAM,CAC1CjB,MAAM,CAACkB,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC1B,CAAC,CAAC,CAACL,QAAA,CAAAE,IAAA,SACG,CAAAxB,QAAQ,CAAC4B,IAAI,CAAC,qBAAqB,CAAE,EAAE,CAAC,QACxCZ,MAAM,CAAGhB,QAAQ,CAAC6B,SAAS,CAAC,CAAC,CAAAP,QAAA,CAAAE,IAAA,SACb,CAAAR,MAAM,CAACc,UAAU,CAAC,CAAC,QAAnCb,OAAO,CAAAK,QAAA,CAAAS,IAAA,CACbtC,UAAU,CAACwB,OAAO,CAAC,CACfC,eAAe,CAAG,4CAA4C,CAE5DtB,SAAQ,CAAG,GAAI,CAAAlB,MAAM,CAACsD,QAAQ,CAClCd,eAAe,CACf3C,MAAM,CAAC0D,GAAG,CACVjB,MACF,CAAC,CACD;AACAnB,WAAW,CAACD,SAAQ,CAAC,CACrBK,WAAW,CAACD,QAAQ,CAAC,CAACsB,QAAA,CAAAE,IAAA,kBAEtBU,OAAO,CAACC,KAAK,CAAC,2BAA2B,CAAC,CAAC,yBAAAb,QAAA,CAAAc,IAAA,MAAArB,OAAA,GAE9C,kBA1BK,CAAAL,YAAYA,CAAA,SAAAC,IAAA,CAAA0B,KAAA,MAAAC,SAAA,OA0BjB,CACDtC,QAAQ,EAAIU,YAAY,CAAC,CAAC,CAC5B,CAAC,CAAE,EAAE,CAAC,CACN,mBACEzB,KAAA,CAAAE,SAAA,EAAAoD,QAAA,EACG,CAACnC,SAAS,eACTrB,IAAA,WAAQyD,SAAS,CAAC,OAAO,CAACC,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAApC,YAAY,CAAC,IAAI,CAAC,EAAC,CAAAkC,QAAA,CAAC,OAE7D,CAAQ,CACT,CACAnC,SAAS,eACRrB,IAAA,CAACF,KAAK,EAACwB,YAAY,CAAEA,YAAa,CAACT,QAAQ,CAAEA,QAAS,CAAQ,CAC/D,cAEDX,KAAA,QAAKuD,SAAS,CAAC,KAAK,CAAAD,QAAA,eACjBxD,IAAA,OAAI2D,CAAC,CAAC,MAAM,CAAAH,QAAA,CAAC,aAAW,CAAI,CAAC,cAE9BxD,IAAA,QAAK4D,KAAK,CAAC,IAAI,CAAM,CAAC,cACtB5D,IAAA,QAAK4D,KAAK,CAAC,QAAQ,CAAM,CAAC,cAC1B5D,IAAA,QAAK4D,KAAK,CAAC,QAAQ,CAAM,CAAC,cAE1B1D,KAAA,MAAG2D,KAAK,CAAE,CAAEC,KAAK,CAAE,QAAS,CAAE,CAAAN,QAAA,EAAC,YACnB,CAAC/C,OAAO,CAAGA,OAAO,CAAG,eAAe,EAC7C,CAAC,cACJT,IAAA,CAACJ,UAAU,EACTa,OAAO,CAAEA,OAAQ,CACjBQ,QAAQ,CAAEA,QAAS,CACnBJ,QAAQ,CAAEA,QAAS,CACR,CAAC,cACdb,IAAA,CAACH,OAAO,EAACgB,QAAQ,CAAEA,QAAS,CAACJ,OAAO,CAAEA,OAAQ,CAAU,CAAC,EACtD,CAAC,EACN,CAAC,CAEP,CAEA,cAAe,CAAAJ,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}