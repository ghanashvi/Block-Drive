{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Home/OneDrive/Desktop/Block_Drive/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Home/OneDrive/Desktop/Block_Drive/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Home/OneDrive/Desktop/Block_Drive/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Upload from\"./artifacts/contracts/Upload.sol/Upload.json\";import{useState,useEffect}from\"react\";import{ethers}from\"ethers\";import FileUpload from\"./components/FileUpload\";import Display from\"./components/Display\";import Modal from\"./components/Modal\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),account=_useState2[0],setAccount=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),contract=_useState4[0],setContract=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),provider=_useState6[0],setProvider=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),modalOpen=_useState8[0],setModalOpen=_useState8[1];useEffect(function(){// const provider = new ethers.providers.Web3Provider(window.ethereum);\nvar provider=window.ethereum!=null?new ethers.providers.Web3Provider(window.ethereum):ethers.providers.getDefaultProvider();var loadProvider=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var signer,address,contractAddress,_contract;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!provider){_context.next=16;break;}window.ethereum.on(\"chainChanged\",function(){window.location.reload();});window.ethereum.on(\"accountsChanged\",function(){window.location.reload();});_context.next=5;return provider.send(\"eth_requestAccounts\",[]);case 5:signer=provider.getSigner();_context.next=8;return signer.getAddress();case 8:address=_context.sent;setAccount(address);contractAddress=\"0xf0b324441f6151436e672DFf6b4037F96D3CD94d\";_contract=new ethers.Contract(contractAddress,Upload.abi,signer);//console.log(contract);\nsetContract(_contract);setProvider(provider);_context.next=17;break;case 16:console.error(\"Metamask is not installed\");case 17:case\"end\":return _context.stop();}},_callee);}));return function loadProvider(){return _ref.apply(this,arguments);};}();provider&&loadProvider();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[!modalOpen&&/*#__PURE__*/_jsx(\"button\",{className:\"share\",onClick:function onClick(){return setModalOpen(true);},children:\"Share\"}),modalOpen&&/*#__PURE__*/_jsx(Modal,{setModalOpen:setModalOpen,contract:contract}),/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{i:\"head\",children:\"Block-Drive\"}),/*#__PURE__*/_jsx(\"div\",{class:\"bg\"}),/*#__PURE__*/_jsx(\"div\",{class:\"bg bg2\"}),/*#__PURE__*/_jsx(\"div\",{class:\"bg bg3\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:\"yellow\"},children:[\"Account : \",account?account:\"Not connected\"]}),/*#__PURE__*/_jsx(FileUpload,{account:account,provider:provider,contract:contract}),/*#__PURE__*/_jsx(Display,{contract:contract,account:account})]})]});}export default App;","map":{"version":3,"names":["Upload","useState","useEffect","ethers","FileUpload","Display","Modal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","_useState","_useState2","_slicedToArray","account","setAccount","_useState3","_useState4","contract","setContract","_useState5","_useState6","provider","setProvider","_useState7","_useState8","modalOpen","setModalOpen","window","ethereum","providers","Web3Provider","getDefaultProvider","loadProvider","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","signer","address","contractAddress","_contract","wrap","_callee$","_context","prev","next","on","location","reload","send","getSigner","getAddress","sent","Contract","abi","console","error","stop","apply","arguments","children","className","onClick","i","class","style","color"],"sources":["C:/Users/Home/OneDrive/Desktop/Block_Drive/client/src/App.js"],"sourcesContent":["import Upload from \"./artifacts/contracts/Upload.sol/Upload.json\";\nimport { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\nimport FileUpload from \"./components/FileUpload\";\nimport Display from \"./components/Display\";\nimport Modal from \"./components/Modal\";\nimport \"./App.css\";\n\nfunction App() {\n  const [account, setAccount] = useState(\"\");\n  const [contract, setContract] = useState(null);\n  const [provider, setProvider] = useState(null);\n  const [modalOpen, setModalOpen] = useState(false);\n\n  useEffect(() => {\n    // const provider = new ethers.providers.Web3Provider(window.ethereum);\n    const provider = ((window.ethereum != null) ? new ethers.providers.Web3Provider(window.ethereum) : ethers.providers.getDefaultProvider());\n\n    const loadProvider = async () => {\n      if (provider) {\n        window.ethereum.on(\"chainChanged\", () => {\n          window.location.reload();\n        });\n\n        window.ethereum.on(\"accountsChanged\", () => {\n          window.location.reload();\n        });\n        await provider.send(\"eth_requestAccounts\", []);\n        const signer = provider.getSigner();\n        const address = await signer.getAddress();\n        setAccount(address);\n        let contractAddress = \"0xf0b324441f6151436e672DFf6b4037F96D3CD94d\";\n\n        const contract = new ethers.Contract(\n          contractAddress,\n          Upload.abi,\n          signer\n        );\n        //console.log(contract);\n        setContract(contract);\n        setProvider(provider);\n      } else {\n        console.error(\"Metamask is not installed\");\n      }\n    };\n    provider && loadProvider();\n  }, []);\n  return (\n    <>\n      {!modalOpen && (\n        <button className=\"share\" onClick={() => setModalOpen(true)}>\n          Share\n        </button>\n      )}\n      {modalOpen && (\n        <Modal setModalOpen={setModalOpen} contract={contract}></Modal>\n      )}\n\n      <div className=\"App\">\n         <h1 i=\"head\">Block-Drive</h1> \n        \n        <div class=\"bg\"></div>\n        <div class=\"bg bg2\"></div>\n        <div class=\"bg bg3\"></div>\n\n        <p style={{ color: \"yellow\" }}>\n          Account : {account ? account : \"Not connected\"}\n        </p>\n        <FileUpload\n          account={account}\n          provider={provider}\n          contract={contract}\n        ></FileUpload>\n        <Display contract={contract} account={account}></Display>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}